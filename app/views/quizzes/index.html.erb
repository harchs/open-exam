<div class="quiz-content">
  <div class="quiz-header">
    <h2>Take a Quiz</h2>
  </div>
  <div class="quiz-list">
    <ul>
    <% @quizzes.each do |quiz| %>
      <% if quiz.is_ready_to_take? && !quiz.taken_by?(current_user)%>
        <li>
          <% if current_user.has_started?(quiz) %>
            <a href="<%= new_question_answer_path(quiz.question_to_resume(current_user)) %>"
            <span>Resume Quiz</span>
          <% else %>
            <a href="<%= new_question_answer_path(quiz.approved_questions.first) %>">
          <% end %>
            <span class="title">[<%= truncate(quiz.name, :length => 30) %>]</span>
            <span class="description">- <%= pluralize(quiz.approved_questions.length, 'question') %> - <%= truncate(quiz.description, :length => 30) %>-</span>
          </a>
          <span class="links">
            <% if current_user.is_admin? %>
              <%= link_to 'Edit', edit_quiz_path(quiz), :class => "edit-icon"  %>
              <%= link_to 'Destroy', quiz, method: :delete, data: { confirm: 'Are you sure?' }, :class => "trash-icon" %>
            <% end %>
          </span>
        </li>
      <% end %>
    <% end %>        
    </ul>
  </div>
</div>

<script type="text/javascript">
  $(function(){
    $('.edit-icon').tooltip({
      title: "Edit quiz"
    });
    $('.trash-icon').tooltip({
      title: "Delete quiz"
    });
  });
</script>
